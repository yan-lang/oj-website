{% extends "oj/course/base.html" %}
{% load i18n %}
{% block title %}
    {{ assignment.name }}・{{ course.name }}
{% endblock %}

{% block stylesheet %}
    {{ block.super }}
    {% load static %}
    <link href="{% static 'css/markdown.css' %}" rel="stylesheet">
{% endblock %}

{% block course_content %}
    <div class='col-assignment'>
        <div class='assignment-header'>
            <h2>{{ assignment.name }}</h2>
            <div class="assignment-header-status">
                <svg width="1em" height="1em" viewBox="0 0 85 85" version="1.1"
                     xmlns="http://www.w3.org/2000/svg">
                    <g id="页面-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                        <g id="checkmark.circle.fill" transform="translate(-2891.000000, -618.000000)">
                            <g id="Notes" fill="#FFFFFF" fill-rule="nonzero">
                                <rect id="artboard" x="0" y="0" width="3300" height="2200"></rect>
                            </g>
                            <g id="Guides" transform="translate(263.000000, 625.000000)"
                               stroke="#27AAE1"
                               stroke-width="0.577">
                                <line x1="0" y1="71" x2="2773" y2="71" id="Baseline-S"></line>
                                <line x1="0" y1="0.541" x2="2773" y2="0.541" id="Capline-S"></line>
                            </g>
                            <g id="Symbols" transform="translate(498.000000, 618.000000)" fill="#20A85C"
                               fill-rule="nonzero">
                                <g id="Black-S" transform="translate(2392.570000, 0.000000)">
                                    <path d="M42.8281,84.78711 C65.9727,84.78711 84.8203,65.9395 84.8203,42.7949 C84.8203,19.6504 65.9727,0.8027 42.8281,0.8027 C19.6836,0.8027 0.83594,19.6504 0.83594,42.7949 C0.83594,65.9395 19.6836,84.78711 42.8281,84.78711 Z M37.7988,64.5234 C35.6504,64.5234 33.8926,63.4492 32.6719,62.082 L21.7344,49.582 C20.5137,48.2148 20.123,47.0918 20.123,45.6758 C20.123,42.5996 22.7109,40.1582 25.7383,40.1582 C27.4473,40.1582 28.7168,40.9395 29.8398,42.1113 L37.7988,50.998 L52.7402,27.5605 C54.1074,25.4609 55.6211,24.3867 57.7207,24.3867 C60.6992,24.3867 63.3848,26.6816 63.3848,29.709 C63.3848,30.7832 63.043,32.0039 62.2617,33.2246 L42.9746,61.6914 C41.8027,63.4004 39.8496,64.5234 37.7988,64.5234 Z"
                                          id="形状"></path>
                                </g>
                            </g>
                        </g>
                    </g>
                </svg>
                <span>已通过 · 100/100 分</span>
            </div>
            <div class="alert alert-primary alert-dismissible fade show mt-2" role="alert">
                <strong>Holy guacamole!</strong> You should check in on some of those fields below.
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
        </div>
        <table class='assignment-deadline-information'>
            <tbody>
            <tr>
                <td><strong>{% trans "Deadline" %}</strong></td>
                <td>
                    <div>
                        作业截止日期为Jan 26, 11:59 PM PST
                    </div>
                    <div class="caption-text color-text-secondary">您仍可以在课程结束前完成此作业。</div>
                </td>
            </tr>
            </tbody>
        </table>

        <nav class="mt-3">
            <div class="nav nav-tabs" id="nav-tab" role="tablist">
                <a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab" href="#nav-description"
                   role="tab" aria-controls="nav-home" aria-selected="true">{% trans "Description" %}</a>
                <a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab" href="#nav-submission"
                   role="tab" aria-controls="nav-profile" aria-selected="false">{% trans "Submission" %}</a>
            </div>
        </nav>

        <div class="tab-content" id="nav-tabContent">
            <div class="assignment-description tab-pane fade show active" id="nav-description" role="tabpanel"
                 aria-labelledby="nav-home-tab">
                <div class='row mt-2'>
                    <div class='col-lg-9'>
                        <div class="markdown-body">{{ assignment.description | safe }}</div>
                    </div>
                    <div class="col-lg-3">
                        <div class="alert-submit-guide alert alert-secondary" role="alert">
                            <h4>{% trans "How to submit?" %}</h4>
                            <p>{% trans "When you are ready, you can submit your solution at the 'My submission' tab." %}</p>
                        </div>
                    </div>
                </div>
            </div>

            <div class="assignment-submission tab-pane fade" id="nav-submission" role="tabpanel"
                 aria-labelledby="nav-profile-tab">
                <div class='row pt-3'>
                    <div class="col-md-12">
                        <button type="button" class="btn btn-primary" data-toggle="modal"
                                data-target="#staticBackdrop">{% trans "Create submission" %}</button>
                    </div>
                    <!-- Modal -->
                    <div class="modal fade" id="staticBackdrop" data-backdrop="static" tabindex="-1" role="dialog"
                         aria-labelledby="staticBackdropLabel" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title"
                                        id="staticBackdropLabel">{% trans "Create submission" %}</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <div class="custom-file">
                                        <input type="file" class="custom-file-input" id="customFile">
                                        <label class="custom-file-label"
                                               for="customFile">{% trans "Choose file" %}</label>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary"
                                            data-dismiss="modal">{% trans "Close" %}</button>
                                    <button type="button" class="btn btn-primary">{% trans "Submit" %}</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class='row pt-3'>
                    <div class="col-md-12">
                        <h3>{% trans "Your submissions" %}</h3>
                        <div class="grade-history container-fluid mt-4">
                            <div class="row header">
                                <div class="col-7 text-left">
                                    {% trans "Date" %}
                                </div>
                                <div class="col-2 text-right">
                                    {% trans "Score" %}
                                </div>
                                <div class="col-3 text-center">
                                    {% trans "Passed?" %}
                                </div>
                            </div>
                            {% for submission in submissions %}
                                <div class="row submission-row">
                                    <button class='col col-7 text-left nostyle grade-expand' type="button"
                                            data-toggle="collapse" data-target="#collapsesubmission{{ submission.id }}"
                                            aria-expanded="false" aria-controls="collapseExample">
                                        <svg class="bi bi-chevron-right" width="1em" height="1em"
                                             viewBox="0 0 20 20" fill="currentColor"
                                             xmlns="http://www.w3.org/2000/svg">
                                            <path fill-rule="evenodd"
                                                  d="M6.646 3.646a.5.5 0 01.708 0l6 6a.5.5 0 010 .708l-6 6a.5.5 0 01-.708-.708L12.293 10 6.646 4.354a.5.5 0 010-.708z"
                                                  clip-rule="evenodd"></path>
                                        </svg>
                                        <svg class="bi bi-chevron-down" width="1em" height="1em"
                                             viewBox="0 0 20 20" fill="currentColor"
                                             xmlns="http://www.w3.org/2000/svg" style="display: none">
                                            <path fill-rule="evenodd"
                                                  d="M3.646 6.646a.5.5 0 01.708 0L10 12.293l5.646-5.647a.5.5 0 01.708.708l-6 6a.5.5 0 01-.708 0l-6-6a.5.5 0 010-.708z"
                                                  clip-rule="evenodd"></path>
                                        </svg>
                                        <span>{{ submission.submited_time | date }}</span>
                                    </button>
                                    <div class="col col-2 text-right">
                                        {{ submission.grade }}/{{ submission.total_grade }}
                                    </div>
                                    <div class="col col-3 text-center">
                                        {{ submission.is_passed }}
                                    </div>
                                </div>
                                <div class="collapse" id="collapsesubmission{{ submission.id }}">
                                    {% for gradeunit in submission.gradeunit_set.all %}
                                        <div class="row detail-row">
                                            <div class="detail-title col col-7 text-left text-secondary">
                                                {{ gradeunit.name }}
                                            </div>
                                            <div class="col col-2 text-right text-secondary">
                                                {{ gradeunit.grade }}/{{ gradeunit.total_grade }}
                                            </div>
                                            <div class="col col-3 text-center text-secondary">
                                                <a class="nostyle" data-toggle="collapse"
                                                   href="#collapsegradeunit{{ gradeunit.pk }}" role="button"
                                                   aria-expanded="false"
                                                   aria-controls="collapseExample">
                                                    <span>{% trans "Show Grading Report" %}</span>
                                                </a>
                                            </div>
                                        </div>
                                        <div class="grade-output collapse" id="collapsegradeunit{{ gradeunit.pk }}">
                                            <div class="card rounded-0 mt-2">
                                                <div class="card-header">
                                                    <a class="btn" href="#">lexical.zip</a>
                                                    <a class="btn float-right" href="#">{% trans "Download" %}</a>
                                                </div>
                                                <div class="card-body">
                                                    <p class="card-text">{{ gradeunit.grade_report }}</p>
                                                </div>
                                            </div>
                                        </div>
                                    {% endfor %}
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <footer class="border-top mt-5">
            <button type="button" class="btn pl-0">
                <svg class="bi bi-chevron-left" width="1em" height="1em" viewBox="0 0 20 20"
                     fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd"
                          d="M13.354 3.646a.5.5 0 010 .708L7.707 10l5.647 5.646a.5.5 0 01-.708.708l-6-6a.5.5 0 010-.708l6-6a.5.5 0 01.708 0z"
                          clip-rule="evenodd"></path>
                </svg>
                {% trans "Previous" %}
            </button>
            <button type="button" class="btn pr-0 float-right">
                {% trans "Next" %}
                <svg class="bi bi-chevron-right" width="1em" height="1em" viewBox="0 0 20 20"
                     fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd"
                          d="M6.646 3.646a.5.5 0 01.708 0l6 6a.5.5 0 010 .708l-6 6a.5.5 0 01-.708-.708L12.293 10 6.646 4.354a.5.5 0 010-.708z"
                          clip-rule="evenodd"></path>
                </svg>
            </button>
        </footer>
    </div>
{% endblock %}